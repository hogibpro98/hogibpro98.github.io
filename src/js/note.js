const initialData = {
    part1: {
        unit1: { listen: 0, read: 0, write: 0 },
        unit2: { listen: 0, read: 0, write: 0 },
        unit3: { listen: 0, read: 0, write: 0 },
        unit4: { listen: 0, read: 0, write: 0 },
        unit5: { listen: 0, read: 0, write: 0 },
        unit6: { listen: 0, read: 0, write: 0 },
        unit7: { listen: 0, read: 0, write: 0 },
        unit8: { listen: 0, read: 0, write: 0 },
        unit9: { listen: 0, read: 0, write: 0 },
        unit10: { listen: 0, read: 0, write: 0 },
        unit11: { listen: 0, read: 0, write: 0 },
        unit12: { listen: 0, read: 0, write: 0 },
        unit13: { listen: 0, read: 0, write: 0 },
        unit14: { listen: 0, read: 0, write: 0 },
        unit15: { listen: 0, read: 0, write: 0 },
        unit16: { listen: 0, read: 0, write: 0 },
        unit17: { listen: 0, read: 0, write: 0 },
        unit18: { listen: 0, read: 0, write: 0 },
        unit19: { listen: 0, read: 0, write: 0 },
        unit20: { listen: 0, read: 0, write: 0 },
        unit21: { listen: 0, read: 0, write: 0 },
        unit22: { listen: 0, read: 0, write: 0 },
        unit23: { listen: 0, read: 0, write: 0 },
        unit24: { listen: 0, read: 0, write: 0 },
        unit25: { listen: 0, read: 0, write: 0 },
        unit26: { listen: 0, read: 0, write: 0 },
        unit27: { listen: 0, read: 0, write: 0 },
        unit28: { listen: 0, read: 0, write: 0 },
        unit29: { listen: 0, read: 0, write: 0 },
        unit30: { listen: 0, read: 0, write: 0 },
        unit31: { listen: 0, read: 0, write: 0 },
        unit32: { listen: 0, read: 0, write: 0 },
        unit33: { listen: 0, read: 0, write: 0 },
        unit34: { listen: 0, read: 0, write: 0 },
        unit35: { listen: 0, read: 0, write: 0 },
        unit36: { listen: 0, read: 0, write: 0 },
        unit37: { listen: 0, read: 0, write: 0 },
        unit38: { listen: 0, read: 0, write: 0 },
        unit39: { listen: 0, read: 0, write: 0 },
        unit40: { listen: 0, read: 0, write: 0 },
    },
    part2: {
        unit1: { listen: 0, read: 0, write: 0 },
        unit2: { listen: 0, read: 0, write: 0 },
        unit3: { listen: 0, read: 0, write: 0 },
        unit4: { listen: 0, read: 0, write: 0 },
        unit5: { listen: 0, read: 0, write: 0 },
        unit6: { listen: 0, read: 0, write: 0 },
        unit7: { listen: 0, read: 0, write: 0 },
        unit8: { listen: 0, read: 0, write: 0 },
        unit9: { listen: 0, read: 0, write: 0 },
        unit10: { listen: 0, read: 0, write: 0 },
        unit11: { listen: 0, read: 0, write: 0 },
        unit12: { listen: 0, read: 0, write: 0 },
        unit13: { listen: 0, read: 0, write: 0 },
        unit14: { listen: 0, read: 0, write: 0 },
        unit15: { listen: 0, read: 0, write: 0 },
        unit16: { listen: 0, read: 0, write: 0 },
        unit17: { listen: 0, read: 0, write: 0 },
        unit18: { listen: 0, read: 0, write: 0 },
        unit19: { listen: 0, read: 0, write: 0 },
        unit20: { listen: 0, read: 0, write: 0 },
        unit21: { listen: 0, read: 0, write: 0 },
        unit22: { listen: 0, read: 0, write: 0 },
        unit23: { listen: 0, read: 0, write: 0 },
        unit24: { listen: 0, read: 0, write: 0 },
        unit25: { listen: 0, read: 0, write: 0 },
        unit26: { listen: 0, read: 0, write: 0 },
        unit27: { listen: 0, read: 0, write: 0 },
        unit28: { listen: 0, read: 0, write: 0 },
        unit29: { listen: 0, read: 0, write: 0 },
        unit30: { listen: 0, read: 0, write: 0 },
        unit31: { listen: 0, read: 0, write: 0 },
        unit32: { listen: 0, read: 0, write: 0 },
        unit33: { listen: 0, read: 0, write: 0 },
        unit34: { listen: 0, read: 0, write: 0 },
        unit35: { listen: 0, read: 0, write: 0 },
        unit36: { listen: 0, read: 0, write: 0 },
        unit37: { listen: 0, read: 0, write: 0 },
        unit38: { listen: 0, read: 0, write: 0 },
        unit39: { listen: 0, read: 0, write: 0 },
        unit40: { listen: 0, read: 0, write: 0 },
    },
    part3: {
        unit1: { listen: 0, read: 0, write: 0 },
        unit2: { listen: 0, read: 0, write: 0 },
        unit3: { listen: 0, read: 0, write: 0 },
        unit4: { listen: 0, read: 0, write: 0 },
        unit5: { listen: 0, read: 0, write: 0 },
        unit6: { listen: 0, read: 0, write: 0 },
        unit7: { listen: 0, read: 0, write: 0 },
        unit8: { listen: 0, read: 0, write: 0 },
        unit9: { listen: 0, read: 0, write: 0 },
        unit10: { listen: 0, read: 0, write: 0 },
        unit11: { listen: 0, read: 0, write: 0 },
        unit12: { listen: 0, read: 0, write: 0 },
        unit13: { listen: 0, read: 0, write: 0 },
        unit14: { listen: 0, read: 0, write: 0 },
        unit15: { listen: 0, read: 0, write: 0 },
        unit16: { listen: 0, read: 0, write: 0 },
        unit17: { listen: 0, read: 0, write: 0 },
        unit18: { listen: 0, read: 0, write: 0 },
        unit19: { listen: 0, read: 0, write: 0 },
        unit20: { listen: 0, read: 0, write: 0 },
        unit21: { listen: 0, read: 0, write: 0 },
        unit22: { listen: 0, read: 0, write: 0 },
        unit23: { listen: 0, read: 0, write: 0 },
        unit24: { listen: 0, read: 0, write: 0 },
        unit25: { listen: 0, read: 0, write: 0 },
        unit26: { listen: 0, read: 0, write: 0 },
        unit27: { listen: 0, read: 0, write: 0 },
        unit28: { listen: 0, read: 0, write: 0 },
        unit29: { listen: 0, read: 0, write: 0 },
        unit30: { listen: 0, read: 0, write: 0 },
        unit31: { listen: 0, read: 0, write: 0 },
        unit32: { listen: 0, read: 0, write: 0 },
        unit33: { listen: 0, read: 0, write: 0 },
        unit34: { listen: 0, read: 0, write: 0 },
        unit35: { listen: 0, read: 0, write: 0 },
        unit36: { listen: 0, read: 0, write: 0 },
        unit37: { listen: 0, read: 0, write: 0 },
        unit38: { listen: 0, read: 0, write: 0 },
        unit39: { listen: 0, read: 0, write: 0 },
        unit40: { listen: 0, read: 0, write: 0 },
    },
    part4: {
        unit1: { listen: 0, read: 0, write: 0 },
        unit2: { listen: 0, read: 0, write: 0 },
        unit3: { listen: 0, read: 0, write: 0 },
        unit4: { listen: 0, read: 0, write: 0 },
        unit5: { listen: 0, read: 0, write: 0 },
        unit6: { listen: 0, read: 0, write: 0 },
        unit7: { listen: 0, read: 0, write: 0 },
        unit8: { listen: 0, read: 0, write: 0 },
        unit9: { listen: 0, read: 0, write: 0 },
        unit10: { listen: 0, read: 0, write: 0 },
        unit11: { listen: 0, read: 0, write: 0 },
        unit12: { listen: 0, read: 0, write: 0 },
        unit13: { listen: 0, read: 0, write: 0 },
        unit14: { listen: 0, read: 0, write: 0 },
        unit15: { listen: 0, read: 0, write: 0 },
        unit16: { listen: 0, read: 0, write: 0 },
        unit17: { listen: 0, read: 0, write: 0 },
        unit18: { listen: 0, read: 0, write: 0 },
        unit19: { listen: 0, read: 0, write: 0 },
        unit20: { listen: 0, read: 0, write: 0 },
        unit21: { listen: 0, read: 0, write: 0 },
        unit22: { listen: 0, read: 0, write: 0 },
        unit23: { listen: 0, read: 0, write: 0 },
        unit24: { listen: 0, read: 0, write: 0 },
        unit25: { listen: 0, read: 0, write: 0 },
        unit26: { listen: 0, read: 0, write: 0 },
        unit27: { listen: 0, read: 0, write: 0 },
        unit28: { listen: 0, read: 0, write: 0 },
        unit29: { listen: 0, read: 0, write: 0 },
        unit30: { listen: 0, read: 0, write: 0 },
        unit31: { listen: 0, read: 0, write: 0 },
        unit32: { listen: 0, read: 0, write: 0 },
        unit33: { listen: 0, read: 0, write: 0 },
        unit34: { listen: 0, read: 0, write: 0 },
        unit35: { listen: 0, read: 0, write: 0 },
        unit36: { listen: 0, read: 0, write: 0 },
        unit37: { listen: 0, read: 0, write: 0 },
        unit38: { listen: 0, read: 0, write: 0 },
        unit39: { listen: 0, read: 0, write: 0 },
        unit40: { listen: 0, read: 0, write: 0 },
    }
};

function loadData() {
    const data = JSON.parse(localStorage.getItem('data')) || initialData;
    const tbody = document.getElementById('table-body');
    tbody.innerHTML = '';

    Object.keys(data).forEach(part => {
        const partHeaderRow = document.createElement('tr');
        const partHeaderCell = document.createElement('td');
        partHeaderCell.colSpan = 5;
        partHeaderCell.classList.add('part-header');
        partHeaderCell.textContent = part.replace('part', '(Click to show)Listening Practice Through Dictation ');
        partHeaderRow.appendChild(partHeaderCell);
        tbody.appendChild(partHeaderRow);

        Object.keys(data[part]).forEach(unit => {
            const row = document.createElement('tr');
            row.classList.add('unit-row', `${part}-rows`);

            const partCell = document.createElement('td');
            partCell.textContent = part.replace('part', 'Part ');
            partCell.style.display = 'none';
            row.appendChild(partCell);

            const unitCell = document.createElement('td');
            unitCell.textContent = unit.replace('unit', 'Unit ');
            row.appendChild(unitCell);

            const listenCell = document.createElement('td');
            const listenInput = document.createElement('input');
            listenInput.type = 'number';
            listenInput.id = `${part}-${unit}-listen`;
            listenInput.value = data[part][unit].listen;
            listenCell.appendChild(listenInput);
            row.appendChild(listenCell);

            const readCell = document.createElement('td');
            const readInput = document.createElement('input');
            readInput.type = 'number';
            readInput.id = `${part}-${unit}-read`;
            readInput.value = data[part][unit].read;
            readCell.appendChild(readInput);
            row.appendChild(readCell);

            const writeCell = document.createElement('td');
            const writeInput = document.createElement('input');
            writeInput.type = 'number';
            writeInput.id = `${part}-${unit}-write`;
            writeInput.value = data[part][unit].write;
            writeCell.appendChild(writeInput);
            row.appendChild(writeCell);

            tbody.appendChild(row);
        });

        partHeaderCell.addEventListener('click', () => {
            const unitRows = document.querySelectorAll(`.${part}-rows`);
            unitRows.forEach(row => {
                row.style.display = row.style.display === 'none' ? 'table-row' : 'none';
            });
        });
    });
}

function saveData() {
    const data = { part1: {}, part2: {}, part3: {}, part4: {} };

    ['part1', 'part2', 'part3', 'part4'].forEach(part => {
        Object.keys(initialData[part]).forEach(unit => {
            data[part][unit] = {
                listen: parseInt(document.getElementById(`${part}-${unit}-listen`).value),
                read: parseInt(document.getElementById(`${part}-${unit}-read`).value),
                write: parseInt(document.getElementById(`${part}-${unit}-write`).value)
            };
        });
    });

    localStorage.setItem('data', JSON.stringify(data));
    alert('Data saved successfully!');
    loadData();
}

window.onload = loadData;